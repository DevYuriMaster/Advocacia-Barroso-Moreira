<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/cadLog.css">
    <title>ABS - LoginADM</title>
</head>

<body>

    <div class="estrutura">
        <header class="header">
            <a href="#" class="logo"><img src="/img/logo-advocacia-pro200.png" alt=""></a>

            <ul class="social-list">
                <li>
                    <a href="#"><img src="/img/icones/facebook-logo.png" /></a>
                </li>
                <li>
                    <a href="#"><img src="/img/icones/twitter-logo.png" /></a>
                </li>
                <li>
                    <a href="https://www.linkedin.com/in/nicolasbarroso/" target="_blank" rel="external"><img
                            src="/img/icones/linkedin-logo.png" /></a>
                </li>
            </ul>

        </header>


        <main class="conteudo">
            <div class="container">
                <form class="cadLog-form" id="form-login" method="POST" action="/loginADM">
                    <h1>ADMINISTRADOR</h1>

                    <label>CPF</label>
                    <input required="" maxlength="11" name="cpf" type="text" placeholder="CPF" id="campoCPF">

                    <label>SENHA</label>
                    <input required="" maxlength="20" id="campoSenha" name="senha" type="password" placeholder="*****">

                    <button type="submit" onclick="submitForm()">ENVIAR</button>
                    <p>PÁGINA EXCLUSIVA DE ADM</p>

                    <script>
                        function submitForm() {
                            var cpf = document.getElementById("campoCPF").value;
                            var senha = document.getElementById("campoSenha").value;

                            // Enviar os dados do formulário para a rota /loginADM
                            var xhr = new XMLHttpRequest();
                            xhr.open("POST", "/loginADM", true);
                            xhr.setRequestHeader("Content-Type", "application/json");
                            xhr.onreadystatechange = function () {
                                if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
                                    // Autenticação bem-sucedida, redirecionar para a página inicial
                                    window.location.href = "/";
                                } else if (xhr.readyState === XMLHttpRequest.DONE) {
                                    // Autenticação falhou, exibir mensagem de erro
                                    alert("CPF ou senha inválida!");
                                }
                            };
                            xhr.send(JSON.stringify({ cpf: cpf, senha: senha }));
                        }
                    </script>
                </form>

            </div>
        </main>


        <footer class="footer">
            <ul class="social-list-f">
                <li>
                    <a href="#"><img src="/img/icones/facebook-logo.png" /></a>
                </li>
                <li>
                    <a href="#"><img src="/img/icones/twitter-logo.png" /></a>
                </li>
                <li>
                    <a href="https://www.linkedin.com/in/nicolasbarroso/" target="_blank" rel="external"><img
                            src="/img/icones/linkedin-logo.png" /></a>
                </li>
            </ul>

            <div class="direitos" id="direitos">
                <p>Advocacia Barroso & Silva</p>
                <p>Todos os direitos reservados</p>
                <p>Fale conosco: (61) 9 9929-1910</p>
            </div>
        </footer>


    </div>


    <script src="/js/rules.js"></script>
    <script src="/js/redirect.js"></script>
</body>

</html>